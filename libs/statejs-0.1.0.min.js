/*! StateJS 2015-04-02 */
this.statejs=this.statejs||{},function(){"use strict";statejs.createUUID=function(){for(var a=[],b="0123456789abcdef",c=0;36>c;c++)a[c]=b.substr(Math.floor(16*Math.random()),1);a[14]="4",a[19]=b.substr(3&a[19]|8,1),a[8]=a[13]=a[18]=a[23]="-";var d=a.join("");return d},statejs.Class=function(a){var b=function(a){this.initialize(a)};return a&&(b.prototype=Object.create(a.prototype),b.prototype.constructor=b),b.prototype.initialize||(b.prototype.initialize=function(){}),b}}(),this.statejs=this.statejs||{},function(){"use strict";var a=statejs.Class(),b=a.prototype;b.initialize=function(){this._baseMemory={},this._machineMemory={}},b._getMachineMemory=function(a){return this._machineMemory[a]||(this._machineMemory[a]={stateMemory:{}}),this._machineMemory[a]},b._getStateMemory=function(a,b){var c=a.stateMemory;return c[b]||(c[b]={}),c[b]},b._getMemory=function(a,b){var c=this._baseMemory;return a&&(c=this._getMachineMemory(a),b&&(c=this._getStateMemory(c,b))),c},b.set=function(a,b,c,d){var e=this._getMemory(c,d);e[a]=b},b.get=function(a,b,c){var d=this._getMemory(b,c);return d[a]},statejs.Blackboard=a}(),this.statejs=this.statejs||{},function(){"use strict";var a=statejs.Class(),b=a.prototype;this.id=null,this.machine=null,b.initialize=function(){this.id=statejs.createUUID(),this.machine=null},b.enter=function(){},b.potential=function(){console&&console.log&&console.log("Warning: potential not implemented.")},b.tick=function(){},b.exit=function(){}}(),this.statejs=this.statejs||{},function(){"use strict";var a=statejs.Class(),b=a.prototype;this.id=null,b.initialize=function(){this.id=statejs.createUUID(),this._states={}},b.add=function(a,b){if("undefined"!=typeof this._states[a])throw new Error('State "'+a+'" already on the FSM.');return this._states[a]=b,b.machine=this,this},b.get=function(a){return this._states[a]},b.list=function(){var a=[];for(var b in this._states)a.push(b);return a},b.name=function(a){return a.get("name",this.id)},b.to=function(a,b,c){if("undefined"==typeof this._states[a])throw new Error('State "'+a+'" does not exist.');var d=c.get("name",this.id),e=this.get(d);e&&e.exit(b,c);var f=this._states[a];return c.set("name",a,this.id),f.enter(b,c),this},b.tick=function(a,b){var c=b.get("name",this.id),d=this.get(c);d&&d.tick(a,b)},statejs.FSM=a}(),this.statejs=this.statejs||{},function(){"use strict";var a=statejs.Class(),b=a.prototype;this.id=null,b.initialize=function(){this.id=statejs.createUUID(),this._states=[]},b.add=function(a,b){for(var c=0;c<this._states.length;c++)if(this._states[c].name===a)throw new Error('State "'+a+'" already on the FSM.');return this._states.push({name:a,state:b}),b.target=this.target,b.machine=this,this},b.get=function(a){for(var b=0;b<this._states.length;b++)if(this._states[b].name===a)return this._states[b].state},b.list=function(){for(var a=[],b=0;b<this._states.length;b++)a.push(this._states[b].name);return a},b.name=function(a){return a.get("name",this.id)},b.tick=function(a,b){for(var c=!1,d=null,e=0;e<this._states.length;e++)if(d=this._states[e],d.state.potential(a,b)){this._to(d.name,a,b),c=!0;break}c?d&&d.state.tick(a,b):this._to(null,a,b)},b._to=function(a,b,c){if(null===a)return void c.set("name",null,this.id);if(a!==this.name){var d=this.get(a);if("undefined"==typeof d)throw new Error('State "'+a+'" does not exist.');var e=c.get("name",this.id),f=this.get(e);return f&&f.exit(b,c),c.set("name",a,this.id),d.enter(b,c),this}},statejs.Subsumption=a}(),this.statejs=this.statejs||{},function(){"use strict";var a=statejs.Class(),b=a.prototype;this.id=null,b.initialize=function(){this.id=statejs.createUUID(),this._states=[]},b.add=function(a,b){for(var c=0;c<this._states.length;c++)if(this._states[c].name===a)throw new Error('State "'+a+'" already on the FSM.');return this._states.push({name:a,state:b}),b.target=this.target,b.machine=this,this},b.get=function(a){for(var b=0;b<this._states.length;b++)if(this._states[b].name===a)return this._states[b].state},b.list=function(){for(var a=[],b=0;b<this._states.length;b++)a.push(this._states[b].name);return a},b.name=function(a){return a.get("name",this.id)},b.tick=function(a,b){for(var c=null,d=-1/0,e=null,f=0;f<this._states.length;f++){c=this._states[f];var g=c.state.potential(a,b);g>d&&(d=g,e=c)}e&&(this._to(e.name,a,b),e.state.tick(a,b))},b._to=function(a,b,c){if(null===a)return void c.set("name",null,this.id);if(a!==this.name){var d=this.get(a);if("undefined"==typeof d)throw new Error('State "'+a+'" does not exist.');var e=c.get("name",this.id),f=this.get(e);return f&&f.exit(b,c),c.set("name",a,this.id),d.enter(b,c),this}},statejs.Utility=a}();